<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Cojan van Ballegooijen">
<title>JBoss Data Virtualization Workshop</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book">
<div id="header">
<h1>JBoss Data Virtualization Workshop</h1>
<div class="details">
<span id="author" class="author">Cojan van Ballegooijen</span><br>
<span id="email" class="email"><a href="https://twitter.com/cvanball">@cvanball</a></span><br>
<span id="revnumber">version 6.1,</span>
<span id="revdate">February 14th, 2014</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_what_is_expected_of_you">1.1. What is expected of you</a></li>
<li><a href="#_prerequisites">1.2. Prerequisites</a></li>
<li><a href="#_setup_demo_environment">1.3. Setup demo environment</a>
<ul class="sectlevel3">
<li><a href="#_setup_postgresql">1.3.1. Setup PostgreSQL</a></li>
<li><a href="#_setup_mysql">1.3.2. Setup MySQL</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_install_red_hat_jboss_data_virtualization">2. Install Red Hat JBoss Data Virtualization</a>
<ul class="sectlevel2">
<li><a href="#_installing_red_hat_jboss_data_virtualization_through_graphical_mode">2.1. Installing Red Hat JBoss Data Virtualization through graphical mode</a></li>
<li><a href="#_installing_red_hat_jboss_data_virtualization_through_automated_script_mode">2.2. Installing Red Hat JBoss Data Virtualization through automated script mode</a></li>
<li><a href="#_provision_red_hat_jboss_data_virtualization_on_openshift_online">2.3. Provision Red Hat JBoss Data Virtualization on OpenShift Online</a></li>
</ul>
</li>
<li><a href="#_install_red_hat_jboss_developer_studio">3. Install Red Hat JBoss Developer Studio</a></li>
<li><a href="#_create_a_teiid_project_and_import_data_source">4. Create a Teiid project and Import Data Source</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites_2">4.1. Prerequisites</a></li>
<li><a href="#_open_the_teiid_perspective">4.2. Open the Teiid Perspective</a></li>
<li><a href="#_creating_a_teiid_project">4.3. Creating a Teiid Project</a></li>
<li><a href="#_creating_a_source_model">4.4. Creating a Source Model</a></li>
<li><a href="#_importing_metadata_from_the_product_database">4.5. Importing Metadata from the Product Database</a></li>
<li><a href="#_preview_data_via_the_teiid_server">4.6. Preview Data via the Teiid Server</a></li>
<li><a href="#_import_metadata_from_the_us_customers_and_eu_customers_databases">4.7. Import Metadata from the US_Customers and EU_Customers Databases</a></li>
<li><a href="#_import_metadata_from_a_flat_file">4.8. Import Metadata from a flat file</a></li>
</ul>
</li>
<li><a href="#_create_a_virtual_base_layer">5. Create a Virtual Base Layer</a>
<ul class="sectlevel2">
<li><a href="#_create_a_virtual_base_layer_us_customers_vbl">5.1. Create a virtual base layer: US_Customers_VBL</a></li>
<li><a href="#_create_the_eu_customers_vbl_and_products_vbl_models">5.2. Create the EU_Customers_VBL and Products_VBL Models</a></li>
</ul>
</li>
<li><a href="#_create_an_enterprise_data_layer">6. Create an Enterprise Data Layer</a>
<ul class="sectlevel2">
<li><a href="#_import_the_data_dictionary_schema">6.1. Import the Data Dictionary Schema</a></li>
<li><a href="#_examine_the_data_dictionary">6.2. Examine the Data Dictionary</a></li>
<li><a href="#_create_the_eu_customers_ddc_enterprise_data_layer">6.3. Create the EU_Customers_DDC Enterprise Data Layer</a></li>
<li><a href="#_create_the_us_customers_ddc_enterprise_data_layer">6.4. Create the US_Customers_DDC Enterprise Data Layer</a></li>
</ul>
</li>
<li><a href="#_create_a_data_federation_layer">7. Create a Data Federation Layer</a>
<ul class="sectlevel2">
<li><a href="#_create_a_data_federation_layer_2">7.1. Create a Data Federation Layer</a></li>
</ul>
</li>
<li><a href="#_create_a_web_service">8. Create a Web Service</a></li>
<li><a href="#_virtual_database_deployment">9. Virtual Database Deployment</a>
<ul class="sectlevel2">
<li><a href="#_create_the_vdb_metadata_model">9.1. Create the VDB Metadata Model</a></li>
<li><a href="#_create_data_sources_on_the_jboss_data_virtualization_server">9.2. Create data sources on the JBoss Data Virtualization server</a></li>
<li><a href="#_dependency_diagrams">9.3. Dependency Diagrams</a></li>
</ul>
</li>
<li><a href="#_xml_and_service_sources">10. XML and Service Sources</a>
<ul class="sectlevel2">
<li><a href="#_create_relational_model_from_wsdl">10.1. Create relational model from WSDL</a></li>
</ul>
</li>
<li><a href="#_odata">11. OData</a>
<ul class="sectlevel2">
<li><a href="#_how_to_access_the_data">11.1. How to access the data</a></li>
<li><a href="#_how_to_query_the_data">11.2. How to query the data</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat JBoss Data Virtualization, formerly known as Red Hat JBoss Enterprise Data Services Platform (EDS), is a complete data provisioning, federation, integration and management solution that enables organizations to gain actionable and unified information. Red Hat JBoss Data Virtualization enables agile data utilization in three easy steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Connect: Access data from multiple, heterogeneous data sources.</p>
</li>
<li>
<p>Compose: Easily create reusable, business-friendly logical data models and views by combining and transforming data.</p>
</li>
<li>
<p>Consume: Make unified data easily consumable through open standard interfaces.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/0.1-DV-Architecture.png" alt="0.1 DV Architecture">
</div>
</div>
<div class="paragraph">
<p>Red Hat JBoss Data Virtualization includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tools for creating data views that are accessible through standard protocols (the Teiid Designer plug-in for Red Hat JBoss Developer Studio (JBDS)).</p>
</li>
<li>
<p>A robust runtime environment that provides enterprise-class performance, data integrity, and security (the Red Hat JBoss Data Virtualization Server, which executes as a process within the Red Hat JBoss Enterprise Application Platform (EAP)).</p>
</li>
<li>
<p>A repository for storing metadata (ModeShape)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Red Hat JBoss Data Virtualization is based on the following community projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Teiid (<a href="http://www.jboss.org/teiid" class="bare">http://www.jboss.org/teiid</a>)</p>
</li>
<li>
<p>Teiid Designer (<a href="http://www.jboss.org/teiiddesigner" class="bare">http://www.jboss.org/teiiddesigner</a>)</p>
</li>
<li>
<p>ModeShape (<a href="http://www.jboss.org/modeshape" class="bare">http://www.jboss.org/modeshape</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The figure below depicts the architectural overview of Red Hat JBoss Data Virtualization:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/0.2-DV-Server.png" alt="0.2 DV Server">
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28%;">
<col style="width: 71%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Engine</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The heart of Red Hat JBoss Data Virtualization Server is a high-performance query engine that processes relational, XML, XQuery and procedural queries from federated datasources. Features include support for homogeneous schemas, heterogeneous schemas, transactions, and user defined</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Embedded</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>An easy-to-use JDBC Driver that can embed the Query Engine in any Java application.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>An enterprise ready, scalable, manageable, runtime for the Query Engine that runs inside JBoss EAP that provides additional security, fault-tolerance, and administrative features.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connectors</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Red Hat JBoss Data Virtualization Server includes a rich set of Translators and Resource Adapters that enable access to a variety of sources, including most relational databases, web services, text files, and ldap. Need data from a different source? Custom translators and resource adaptors can easily be developed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tools</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Red Hat JBoss Data Virtualization Server includes development and administration tools</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create - Use Teiid Designer to define virtual databases containing views, procedures or even dynamic XML documents.</p>
</li>
<li>
<p>Monitor &amp; Manage - Use the Management Console with  JBoss EAP or use the JBoss Data Virtualization JBoss Operations Network (JON) plugin to control any number of servers.</p>
</li>
<li>
<p>Script - Use the AdminShell to automate administrative and testing tasks.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_what_is_expected_of_you">1.1. What is expected of you</h3>
<div class="paragraph">
<p>Please feel free to raise your hands with any questions that you have about the lab; feel free to ask why it is you are doing something, or if something does not feel right. Please know that all care was made in creating this user guide, but all screen shots and steps along the way might be off by just a little so please be patient with any issues.</p>
</div>
</div>
<div class="sect2">
<h3 id="_prerequisites">1.2. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>OpenJDK 1.7, 1.8 or Oracle JDK 1.7, 1.8 installed</p>
</li>
<li>
<p>Git installed</p>
</li>
<li>
<p>PostgreSQL server or MySQL server running</p>
</li>
<li>
<p>PostgreSQL or MySQL client tools installed if using a remote database</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_setup_demo_environment">1.3. Setup demo environment</h3>
<div class="paragraph">
<p>In order to use the labs we need to prepare the database. We provide database SQL scripts for PostgreSQL and MySQL to load initial data into the database. The next paragraph will describe how to install the database and load the demo data into the database.</p>
</div>
<div class="sect3">
<h4 id="_setup_postgresql">1.3.1. Setup PostgreSQL</h4>
<div class="paragraph">
<p>Installation
The easiest way to install PostgreSQL is to use the pre-built binary packages which are available for a number of operating systems. See <a href="http://www.postgresql.org/download/" class="bare">http://www.postgresql.org/download/</a> for more information and downloads.
Post-install steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>If *nix or MacOSX switch to user postgres or other OS user who is able to use psql command to connect to the PostgreSQL database.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ su postgres</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Go to the DVWorkshop/dv-docker/demo directory and run the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ psql -a -f financials-psql.sql</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>If Step 2 is successfully executed the the PostgreSQL environment contains the following databases. Hint: start the psql command line utility and type the “\l” to list the databases in PostgreSQL database.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ psql
psql (9.3.4, server 9.0.13)
Type "help" for help.

postgres=# \l
                               List of databases
     Name      |  Owner   | Encoding  | Collate | Ctype |   Access privileges
---------------+----------+-----------+---------+-------+-----------------------
 apaccustomers | postgres | SQL_ASCII | C       | C     |
 brokerinfo    | postgres | SQL_ASCII | C       | C     |
 eucustomers   | postgres | SQL_ASCII | C       | C     |
 postgres      | postgres | SQL_ASCII | C       | C     |
 products      | postgres | SQL_ASCII | C       | C     |
 rhq           | rhqadmin | SQL_ASCII | C       | C     |
 template0     | postgres | SQL_ASCII | C       | C     | =c/postgres          +
               |          |           |         |       | postgres=CTc/postgres
 template1     | postgres | SQL_ASCII | C       | C     | =c/postgres          +
               |          |           |         |       | postgres=CTc/postgres
 uscustomers   | postgres | SQL_ASCII | C       | C     |
(9 rows)

postgres=# \q</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setup_mysql">1.3.2. Setup MySQL</h4>
<div class="paragraph">
<p>Installation
The easiest way to install MySQL is to use the pre-built binary packages which are available for a number of operating systems. See <a href="http://dev.mysql.com/downloads/mysql/" class="bare">http://dev.mysql.com/downloads/mysql/</a> for more information and downloads.
Post-install steps</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="1">
<li>
<p>If *nix or MacOSX go to the /usr/local/mysql directory and start mysqld_safe</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd /usr/local/mysql
$ sudo ./bin/mysqld_safe</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Go to the DVWorkshop/dv-docker/demo directory and tun the following command as depicted in the picture below.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo /usr/local/mysql/bin/mysql &lt; financials-mysql.sql</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>If Step 2 is successfully executed the the MySQL environment contains the following databases.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo /usr/local/mysql/bin/mysql
Password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1
Server version: 5.6.17 MySQL Community Server (GPL)

Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| apaccustomers      |
| brokerinfo         |
| eucustomers        |
| mysql              |
| performance_schema |
| products           |
| test               |
| uscustomers        |
+--------------------+
9 rows in set (0.02 sec)

mysql&gt; exit
Bye</pre>
</div>
</div>
<div class="paragraph">
<p>The labs will use the following databases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>apaccustomer</p>
</li>
<li>
<p>brokerinfo</p>
</li>
<li>
<p>eucustomers</p>
</li>
<li>
<p>products</p>
</li>
<li>
<p>uscustomers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_red_hat_jboss_data_virtualization">2. Install Red Hat JBoss Data Virtualization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are three different ways to install Red Hat JBoss Data Virtualization.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Graphical mode: Graphical mode launches a graphical wizard which provides step-by-step instructions for installing and configuring the Red Hat JBoss Data Virtualization. Additional setup, including the Quickstarts and Maven Repository, is also possible with the installer.</p>
</li>
<li>
<p>Text mode: You can launch the installer in the text mode as well. Text mode provides step-by-step instructions for installing and configuring the Red Hat JBoss Data Virtualization.</p>
</li>
<li>
<p>Automated script mode: You can install multiple identical instances of Red Hat JBoss Data Virtualization using the automated script. This automated script is generated after the first installation instance. We will explain the graphical mode and automated script mode in more detail in the following paragraphs.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_installing_red_hat_jboss_data_virtualization_through_graphical_mode">2.1. Installing Red Hat JBoss Data Virtualization through graphical mode</h3>
<div class="paragraph">
<p>Download the Red Hat JBoss Data Virtualization installer binary by clicking the green download button at <a href="http://www.jboss.org/products/datavirt.html" class="bare">http://www.jboss.org/products/datavirt.html</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-download.png" alt="1.1 DV download">
</div>
</div>
<div class="paragraph">
<p>Open a terminal window and navigate to the location where the GUI installer was downloaded.
Run the installer using java at the command prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar jboss-dv-installer-{version}.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The current available version is 6.1.0.redhat-3 and to run the installer at the command prompt use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar jboss-dv-installer-6.1.0.redhat-3.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Follow the installer prompts to complete the installation process. See the Getting Started with Red Hat JBoss Data Virtualization Installation and Configuration video. See <a href="http://vimeo.com/76457404">http://vimeo.com/76457404</a> for more details.
 A dialogue box will open followed by the End User License Agreement. If you accept the terms of the agreement, select I accept the terms of this license agreement and then click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-EULA.png" alt="1.1 DV EULA">
</div>
</div>
<div class="paragraph">
<p>A filepath confirmation dialogue box will appear. In the Select the installation path field, type the path where you want JBoss Data Virtualization to be installed or click Browse to navigate to the desired location. When the Select the installation path field shows the correct path, click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-FilePath.png" alt="1.1 DV FilePath">
</div>
</div>
<div class="paragraph">
<p>When you are prompted about the specified location being created or overwritten, review the message and, if satisfied, click <b class="button">OK</b> and then press <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-FilePath2.png" alt="1.1 DV FilePath2">
</div>
</div>
<div class="paragraph">
<p>A select the packs dialogue box will appear. Review the packs you want to install and if satisfied, click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-InstallPacks.png" alt="1.1 DV InstallPacks">
</div>
</div>
<div class="paragraph">
<p>You will be prompted to create new users. For convenience one can select one password for all default passwords. Enter the new username and password in the appropriate fields and click <b class="button">Next</b>.
Furthermore select the checkbox "Enable OData access".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-User.png" alt="1.1 DV User">
</div>
</div>
<div class="paragraph">
<p>The Maven Repository Setup window appears. You will need to provide Maven repository settings in order to build quickstarts provided in the Red Hat JBoss Data Virtualization installation. At this point, the installer can automatically configure your Maven settings to setup the online repository for remote access.
To setup the Maven repository, select Specify the path (or URL)&#8230;&#8203;. Enter the location of the Maven settings.xml file or select Browse to navigate to the file. Alternatively, you can choose to skip the Maven repository setup.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-Maven-setup.png" alt="1.1 DV Maven setup">
</div>
</div>
<div class="paragraph">
<p>Skip maven-repository set up for now. Click <b class="button">Next</b> to proceed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-Maven-setup-2.png" alt="1.1 DV Maven setup 2">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Yes</b> to proceed.</p>
</div>
<div class="paragraph">
<p>The IPv6 configuration window appears. Enable IPv6 configuration if your computer is using a pure IPv6 configuration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-IPv6-config.png" alt="1.1 DV IPv6 config">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Next</b> to proceed.</p>
</div>
<div class="paragraph">
<p>You can install Red Hat JBoss Data Virtualization either with default configuration or with additional configuration options. Select option Perform default configuration. Click <b class="button">Next</b> to proceed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-Install-config.png" alt="1.1 DV Install config">
</div>
</div>
<div class="paragraph">
<p>A summary of the installation will be displayed, see below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-install-summary.png" alt="1.1 DV install summary">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Next</b> to start the installation and the Component installation progress window will be displayed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-install-component-summary.png" alt="1.1 DV install component summary">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Next</b> for the installation to commence. This may take a minute.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-install-completed.png" alt="1.1 DV install completed">
</div>
</div>
<div class="paragraph">
<p>Once all the components are installed, click <b class="button">Next</b>.</p>
</div>
<div class="paragraph">
<p>Click Generate installation script and properties file if you wish to generate an automatic script and properties file.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-install-completed-2.png" alt="1.1 DV install completed 2">
</div>
</div>
<div class="paragraph">
<p>For now click <b class="button">Done</b> to complete the installation.</p>
</div>
<div class="paragraph">
<p>Red Hat JBoss Data Virtualization is now successfully installed and configured.
When the installation is complete, navigate to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unix/Linux: EAP_HOME/bin and run the ./standalone.sh</p>
</li>
<li>
<p>Windows: EAP_HOME\bin and run standalone.bat</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>to start the Red Hat JBoss Data Virtualization server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_red_hat_jboss_data_virtualization_through_automated_script_mode">2.2. Installing Red Hat JBoss Data Virtualization through automated script mode</h3>
<div class="paragraph">
<p>Installing Red Hat JBoss Data Virtualization by using an automated script provides everything you need to get you started quickly.
Clone the repository using git from <a href="https://github.com/kpeeples/simplified-dv-template.git" class="bare">https://github.com/kpeeples/simplified-dv-template.git</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ git clone https://github.com/kpeeples/simplified-dv-template.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following username/passwords will be installed automatically for access to</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Username</th>
<th class="tableblock halign-left valign-top">Password</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JBoss EAP Administration console</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">admin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">redhat1!</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teiid Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">teiidUser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">redhat1!</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Download the JBoss Data Virtualization installer binary by clicking the green download button at <a href="http://www.jboss.org/products/datavirt.html" class="bare">http://www.jboss.org/products/datavirt.html</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.1-DV-download.png" alt="1.1 DV download">
</div>
</div>
<div class="paragraph">
<p>Place the software in the distros subfolder of simplified-dv-template folder which was previously created when cloning the repository.</p>
</div>
<div class="paragraph">
<p>Modify the simplified-dv-template/support/InstallationScript.xml file to contain the full path to your installed/dv directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;installpath&gt;</span>/home/kpeeples/demos/dv-install-script-demo/installed/dv<span class="tag">&lt;/installpath&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure to leave the installed/dv directory. The script performs the automated install of JBoss Data Virtualization v6.1.0.GA.
Run the install-run.sh script to install JBoss Data Virtualization and the server will be started automatically as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./install-run.sh</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.2-DV-auto-install.png" alt="1.2 DV auto install">
</div>
</div>
<div class="paragraph">
<p>In case you want to change the password of the admin user, go to simplified-dv-template/installed/dv/jboss-eap-6.3/bin and type the following command and inputs as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.2-DV-auto-install-2.png" alt="1.2 DV auto install 2">
</div>
</div>
<div class="paragraph">
<p>Browse to <a href="http://localhost:8080/dashboard" class="bare">http://localhost:8080/dashboard</a> for the Red Hat JBoss Data Virtualization Dashboard to verify the installation and use user/user as the credentials that were installed as default and click <b class="button">Log In</b>.</p>
</div>
<div class="paragraph">
<p>Red Hat JBoss Data Virtualization is now successfully installed, configured and started using the automated script mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_provision_red_hat_jboss_data_virtualization_on_openshift_online">2.3. Provision Red Hat JBoss Data Virtualization on OpenShift Online</h3>
<div class="paragraph">
<p>With OpenShift you can easily deploy and run JBoss Data Virtualization in minutes to connect your applications to data from many different sources. JBoss Data Virtualization on OpenShift Online is available as a Developer Preview to allow you to explore the capabilities of the technology running on OpenShift Online.</p>
</div>
<div class="paragraph">
<p>Get your free OpenShift Online account
Sign up for your free account OpenShift Online account at <a href="https://www.openshift.com/app/account/new" class="bare">https://www.openshift.com/app/account/new</a> and you should see the screen below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.3-DV-OpenShift.png" alt="1.3 DV OpenShift">
</div>
</div>
<div class="paragraph">
<p>If you already have an OpenShift Online account please sign in with your known OpenShift Online username password combination.</p>
</div>
<div class="paragraph">
<p>Create a new application
If this is your first login into OpenShift Online click at the “&#8594; Create your first application now” link</p>
</div>
<div class="paragraph">
<p>If you already have an OpenShift Online account click <b class="button">Add Application</b> below your list of applications.
Alternatively, you can deploy the DataVirtualization cartridge using the OpenShift RHC Client Tools. Using the rhc client tools type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ rhc app create dv jboss-dv-6.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Choose a type of applications
You can either scroll down to the list of quick links and click the <b class="button">JBoss Data Virtualization 6</b> button under “xPaaS” or search for “Data”.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.3-DV-OpenShift-app.png" alt="1.3 DV OpenShift app">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.3-DV-OpenShift-app2.png" alt="1.3 DV OpenShift app2">
</div>
</div>
<div class="paragraph">
<p>Configure Application
Name your application in your domain, scroll down and click the <b class="button">Create Application</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.3-DV-OpenShift-config-app.png" alt="1.3 DV OpenShift config app">
</div>
</div>
<div class="paragraph">
<p>Next steps
In the Next steps we would like to include a PostgreSQL database to the application previously created on OpenShift Online.
The figure below is shown when the application is successfully created in your domain.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.3-DV-OpenShift-app-create.png" alt="1.3 DV OpenShift app create">
</div>
</div>
<div class="paragraph">
<p>Now we would like to add a PostgreSQL database to the application. Click the Application name link, in the above figure it&#8217;s called “dv”.</p>
</div>
<div class="paragraph">
<p>The following screen should appear.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/1.3-DV-OpenShift-add-psql.png" alt="1.3 DV OpenShift add psql">
</div>
</div>
<div class="paragraph">
<p>Click “Add PostgreSQL 9.2” and click at the next appearing screen “Add Cartridge”.
You have now a successfully created a Red Hat JBoss Data Virtualization environment with a PostgreSQL 9.2 database in just a matter of seconds.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
At the moment you need a local installation of Red Hat JBoss Data Virtualization in order to deploy Data Virtualization projects to the OpenShift environment. This will be addressed in a newer version of JBoss Developer Studio.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_red_hat_jboss_developer_studio">3. Install Red Hat JBoss Developer Studio</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lab will guide you how to install Red Hat JBoss Developer Studio and the tools for creating data views that are accessible through standard protocols (the Teiid Designer plug-in for Red Hat JBoss Developer Studio (JBDS) and connect Red Hat JBoss Developer Studio to the Red Hat JBoss Data Virtualization server.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t already have Red Hat JBoss Developer Studio 8.0.0, download it from <a href="https://www.jboss.org/products/jbds.html">https://www.jboss.org/products/jbds.html</a> by clicking the green download button.
You can use either the installer which includes JBoss EAP (jboss-devstudio-8.0.0.GA-jar_universal.jar) or the stand-alone installer (jboss-devstudio-8.0.0.GA-v20141020-1042-B317-installer-standalone.jar).
The instructions below applies to the stand-alone installer.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-download.png" alt="2.1 JBDS download">
</div>
</div>
<div class="paragraph">
<p>Run the JBDS installer using the java command.
The current available version is 8.0.0.GA, and to run the installer at the command prompt see below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar jboss-devstudio-8.0.0.GA-v20141020-1042-B317-installer-standalone.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Follow the installer prompts to complete the installation process.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install.png" alt="2.1 JBDS install">
</div>
</div>
<div class="paragraph">
<p>When the Installer window opens, click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-eula.png" alt="2.1 JBDS install eula">
</div>
</div>
<div class="paragraph">
<p>After reading and agreeing to the terms of the End User License Agreement, select I accept the terms of this license agreement and click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-target.png" alt="2.1 JBDS install target">
</div>
</div>
<div class="paragraph">
<p>In the Select the installation path field, type the path where you want Red Hat JBoss Developer Studio to be installed or click Browse to navigate to the location. When the Select the installation path field shows the correct path, click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-target2.png" alt="2.1 JBDS install target2">
</div>
</div>
<div class="paragraph">
<p>When you are prompted about the specified location being created or overwritten, review the message and, if satisfied, click <b class="button">OK</b> to proceed and click <b class="button">Next</b> to continue.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-selectvm.png" alt="2.1 JBDS install selectvm">
</div>
</div>
<div class="paragraph">
<p>In the Select Java VM step, Default Java VM is automatically selected. Ensure that the disabled text field contains the path of the Java developer kit you want to use. This is based on the default Java developer kit of your system. To change the specified Java developer kit, select Specific Java VM and type the path of the Java developer kit in the text field or use the Browse button to locate the Java developer kit. When the text field shows the correct Java developer kit path, click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-selectplatform.png" alt="2.1 JBDS install selectplatform">
</div>
</div>
<div class="paragraph">
<p>In the Select Platforms and Servers step one can add server to make use of automatic runtime detection for finding already installed application servers. Skip this for now since we will add servers later. Click <b class="button">Next</b> to proceed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-review.png" alt="2.1 JBDS install review">
</div>
</div>
<div class="paragraph">
<p>Review the details in the Summary Information window and, if they are correct, click <b class="button">Next</b>. The installation commences.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-complete.png" alt="2.1 JBDS install complete">
</div>
</div>
<div class="paragraph">
<p>When the installation progress bar shows Finished, click <b class="button">Next</b>. The installation process is now complete.</p>
</div>
<div class="paragraph">
<p>To create shortcuts for starting JBoss Developer Studio, select the Create shortcuts in the Start-Menu and Create additional shortcut on the desktop check boxes and click <b class="button">Next</b>.
To automatically start JBoss Developer Studio when the Installer window closes, select the Run JBoss Developer Studio after installation check box.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-complete2.png" alt="2.1 JBDS install complete2">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Done</b> to close the Installer window.</p>
</div>
<div class="paragraph">
<p>When the installation is completed, run JBoss Developer Studio 8.0.0. When the Red Hat JBoss Developer Studio starts, you are asked to choose the workspace folder for the session. The workspace is where your projects are stored.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-workspace.png" alt="2.1 JBDS install workspace">
</div>
</div>
<div class="paragraph">
<p>To set the workspace location, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the Workspace field, type the path for a new or existing workspace or use Browse to navigate to the workspace location.</p>
</li>
<li>
<p>If you do not want to be asked to choose a workspace folder each time the IDE starts, select the Use this as the default and do not ask again check box.</p>
</li>
<li>
<p>Click <b class="button">OK</b>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The workspace location prompting behavior can be altered at any time by clicking <span class="menuseq"><span class="menu">Window</span>&#160;&#9656; <span class="menuitem">Preferences</span></span>. Expand <span class="menuseq"><span class="menu">General</span>&#160;&#9656; <span class="submenu">Startup and Shutdown</span>&#160;&#9656; <span class="menuitem">Workspace</span></span>. Select or clear the Prompt for workspace on startup check box to alter the behavior as appropriate.</p>
</div>
<div class="paragraph">
<p>After JBoss Developer Studio 8.0.0 you might get a informational message to inform you that there are updates available. At the time of this writing the latest version is 8.0.2.GA.
Please upgrade to the latest patch version of JBoss Developer Studio 8.0.0 by clicking in the Update balloon message.</p>
</div>
<div class="paragraph">
<p>There are two ways to install the JBoss Data Virtualization Development option in Red Hat JBoss Developer Studio:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using JBoss Central (with Early Access option enabled)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Select <span class="menuseq"><span class="menu">Help</span>&#160;&#9656; <span class="menuitem">JBoss Central</span></span> if JBoss Central isn&#8217;t active. Click the tab Software/Update and select the JBoss Data Virtualization Development option and click <b class="button">Install</b> See figure below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-jboss-central.png" alt="2.1 JBDS jboss central">
</div>
</div>
<div class="paragraph">
<p>Press the <b class="button">Yes</b> button to restart Red Hat JBoss Developer Studio to apply the changes to take effect.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using <span class="menuseq"><span class="menu">Help</span>&#160;&#9656; <span class="menuitem">Install New Software&#8230;&#8203;</span></span></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-add-new-software.png" alt="2.1 JBDS add new software">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-add-new-software2.png" alt="2.1 JBDS add new software2">
</div>
</div>
<div class="paragraph">
<p>In the "Work with:" field on the Install wizard, paste the following link:</p>
</div>
<div class="paragraph">
<p><a href="http://download.jboss.org/jbosstools/updates/stable/kepler/integration-stack/" class="bare">http://download.jboss.org/jbosstools/updates/stable/kepler/integration-stack/</a></p>
</div>
<div class="paragraph">
<p>and click the <b class="button">Add&#8230;&#8203;</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-add-new-software3.png" alt="2.1 JBDS add new software3">
</div>
</div>
<div class="paragraph">
<p>Select JBoss Data Virtualization Development option in the list and click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-add-new-software-review.png" alt="2.1 JBDS add new software review">
</div>
</div>
<div class="paragraph">
<p>Review Install Details and click the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-add-new-software-security.png" alt="2.1 JBDS add new software security">
</div>
</div>
<div class="paragraph">
<p>The Security Warning window appears and click the <b class="button">OK</b> button to proceed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.1-JBDS-install-restart.png" alt="2.1 JBDS install restart">
</div>
</div>
<div class="paragraph">
<p>The Software Updates window appears. Press the <b class="button">Yes</b> button to restart Red Hat JBoss Developer Studio to apply the changes to take effect.</p>
</div>
<div class="paragraph">
<p>Now that you have JBoss Data Virtualization and JBoss Developer Studio successfully installed, it is time to “hook up” JBoss Developer Studio to the JBoss Data Virtualization server instance.</p>
</div>
<div class="paragraph">
<p>If the Servers pane is not already visible in JBoss Developer Studio, you can open it by <span class="menuseq"><span class="menu">Window</span>&#160;&#9656; <span class="submenu">Show View</span>&#160;&#9656; <span class="submenu">Other</span>&#160;&#9656; <span class="submenu">Server</span>&#160;&#9656; <span class="menuitem">Servers</span></span>. The Show View window is presented below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-servers.png" alt="2.2 JBDS servers">
</div>
</div>
<div class="paragraph">
<p>Now, click the <b class="button">OK</b> button. The Servers pane will now be visible in the lower portion of JBoss Developer Studio and is displayed below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS.png" alt="2.2 JBDS">
</div>
</div>
<div class="paragraph">
<p>Now, it is a matter of clicking through several screens to add the JBoss Data Virtualization server instance that was installed as part of Lab 1. Click the link “No servers are available. Click this link to create a new server&#8230;&#8203;” and following window will appear:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-add-server.png" alt="2.2 JBDS add server">
</div>
</div>
<div class="paragraph">
<p>With the New Server wizard enabled, be sure you entries look like those above. Select JBoss Enterprise
Middleware &#8594; JBoss Enterprise Application Platform 6.1+ as the server type. You can keep the defaults that are selected or enter the values appropriate for your workstation. In this case, “localhost” is entered for Server’s host name and “JBoss EAP 6.1+ Runtime Server” is entered for the Server name. Change the Server name into a meaningful name. Click the <b class="button">Next</b> button.
Next, the JBoss Runtime will need to be defined. Essentially, this is selecting the “home” directory for the JBoss Data Virtualization instance that was installed as part of Lab 1. The values to select are illustrated below.
Select the “home” directory for the JBoss Data Virtualization instance. This will be &lt;path to installed instance&gt;/jboss-eap-6.3. Once this runtime is selected, the available configurations are available. To keep things simple, select the “default” profile.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-setup-runtime.png" alt="2.2 JBDS setup runtime">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Finish</b>.</p>
</div>
<div class="paragraph">
<p>The Servers pane will now have the available server available as indicated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-servers-pane.png" alt="2.2 JBDS servers pane">
</div>
</div>
<div class="paragraph">
<p>At this point, you can right-click on the server and there is a list of available options. Click <span class="menu">Start</span> from the available options and the server will start up.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-menu-start.png" alt="2.2 JBDS menu start">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-menu-start2.png" alt="2.2 JBDS menu start2">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If JBoss Data Virtualization Server is already started from the command line using standalone.sh or standalone.bat, JBoss Developer Studio will show a warning "Server already running on localhost", select option "Set the server adapter to 'started', without launching a new server."
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/2.2-JBDS-menu-started.png" alt="2.2 JBDS menu started">
</div>
</div>
<div class="paragraph">
<p>You can now begin creating your own Red Hat JBoss Data Virtualization projects.</p>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_teiid_project_and_import_data_source">4. Create a Teiid project and Import Data Source</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Make sure that the previous labs have been completed so that a JBoss Data Virtualization instance is running and JBDS is connected to the JBoss Data Virtualization server.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites_2">4.1. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>If using PostgreSQL database, download the <a href="http://jdbc.postgresql.org/download.html">PostgreSQL JDBC Driver</a>. If you are using JDK 1.6 then you should use the JDBC4 version. If you are using JDK 1.7 or JDK 1.8 then you should use the JDBC41 version.</p>
</li>
<li>
<p>If using MySQL database, download the <a href="http://www.mysql.com/products/connector/">MySQL JDBC Driver</a>.</p>
</li>
<li>
<p>Save the JDBC driver in a "well-known" directory</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_open_the_teiid_perspective">4.2. Open the Teiid Perspective</h3>
<div class="paragraph">
<p>To begin this exercise, launch JBDS (if it is not already open), and open the “Teiid Designer” perspective. This is because the JBoss perspective is the default perspective.
To open the “Teiid Designer” perspective, first select <span class="menuseq"><span class="menu">Window</span>&#160;&#9656; <span class="submenu">Open Perspective</span>&#160;&#9656; <span class="menuitem">Other&#8230;&#8203;</span></span> in order for the full list of perspectives to be displayed and the “Teiid Designer” perspective to be selectable.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.1-JBDS-perspective.png" alt="3.1 JBDS perspective">
</div>
</div>
<div class="paragraph">
<p>Select Teiid Designer from the perspective list as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.1-JBDS-Teiid-designer.png" alt="3.1 JBDS Teiid designer">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">OK</b>.
This will bring you to a screen that looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.1-JBDS-Teiid-designer2.png" alt="3.1 JBDS Teiid designer2">
</div>
</div>
<div class="paragraph">
<p>Connecting to a running Server instance is necessary to execute previews of the data services that we will create. In the Teiid Guides window select Teiid.
Select the option "Set the Default JBoss / Teiid instance" and double-click on the JBoss Data Virtualization 6.1 server in the Server pane.
For the name simply use “JBoss Data Virtualization 6.1”. For the Teiid JDBC Connection Info, enter “localhost” for the host and enter teiidUser / redhat1! for the username / password. Keep the default port number. Also, be sure that the “Save” checkbox is marked. The “SSL” box should not be marked.
For the Teiid Admin Connection Info, keep the defaults that are listed and use admin / redhat1! for the username / password combination. Keep the default port number. When complete, your Teiid Server Connection Information should look like the illustration below.
As a “sanity” check, be sure to click the <b class="button">Test</b> button. You should get a "OK" message. If you do not, please raise your hand. If it failed, it may be necessary to cancel and retry the steps again.</p>
</div>
<div class="paragraph">
<p>The Teiid View along the bottom of JBDS should look like the following illustration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.1-JBDS-Teiid-view.png" alt="3.1 JBDS Teiid view">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_teiid_project">4.3. Creating a Teiid Project</h3>
<div class="paragraph">
<p>Before you can create models of how your data will be exposed or used, you must first create a project. For the purposes of these labs, we will create a project named Financials. This Financials project will be where we create all of our source and view models and Virtual Database (VDB) files. To create the project, from the menu bar on JBDS, select <span class="menuseq"><span class="menu">File</span>&#160;&#9656; <span class="submenu">New</span>&#160;&#9656; <span class="menuitem">Teiid Model Project</span></span>.
The New Model Project wizard will be displayed as below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.2-new-model-project.png" alt="3.2 new model project">
</div>
</div>
<div class="paragraph">
<p>In the project name, enter “Financials” and keep the remaining defaults. Select the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="paragraph">
<p>After clicking <b class="button">Next</b>, the following window is presented for Project References.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.2-new-model-project2.png" alt="3.2 new model project2">
</div>
</div>
<div class="paragraph">
<p>Keep the default and click <b class="button">Next &gt;</b> again. The next window that is presented is the Model Project Options. These are the folders that we will use during the course of building our Financials project. For this lab we will enter DataSources, EnterpriseDataLayer, Schemas, VirtualBaseLayer and WebServices. The Model Project Options window should look like that below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.2-new-model-project3.png" alt="3.2 new model project3">
</div>
</div>
<div class="paragraph">
<p>At this point, you can click the <b class="button">Finish</b> button.</p>
</div>
<div class="paragraph">
<p>After expanding the Financials Project, the JBDS Teiid Designer Perspective should look similar to the figure below below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.2-JBDS-Teiid-view.png" alt="3.2 JBDS Teiid view">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_source_model">4.4. Creating a Source Model</h3>
<div class="paragraph">
<p>We must create a source model in order to access physical data or information from a source. The source model (also referred to as the physical model) contains all the metadata necessary for a Virtual Database (VDB) and its associated connectors to access or query data from a target source. There are a few different ways of creating source models. We will first go over the process of creating a source model using the Metadata Import Wizard.
The Metadata Import Wizard helps you create new models in the workspace by importing metadata information from a physical enterprise information system or other data source. When you import metadata, the Designer creates a new metadata model for you. Once you have created this metadata model, you can alter it as you would any other. Keep in mind that any changes you make to an imported metadata model do not impact the underlying structure of the enterprise information system the model represents.
In some cases you can also use the Metadata Import Wizard to update the information within the models based on changes to the underlying data source.
The Teiid Designer comes with a number of plug-ins to import metadata from sources such as JDBC-compliant databases, text files, Salesforce.com, WSDL&#8217;s, XML Schemas, and DDL files.
More information on the Import Wizard (and all of the features in the Teiid Designer) is available in the “Designer Users Guide”.</p>
</div>
</div>
<div class="sect2">
<h3 id="_importing_metadata_from_the_product_database">4.5. Importing Metadata from the Product Database</h3>
<div class="paragraph">
<p>Right-click on the “DataSources” folder and select <span class="menu">Import&#8230;&#8203;</span>. In the Import wizard dialog, select the arrow next to “Teiid Designer” to expand the import options. Now, select “JDBC Database &gt;&gt; Source Model” and click <b class="button">Next &gt;</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-importing-metadata.png" alt="3.3 importing metadata">
</div>
</div>
<div class="paragraph">
<p>In the “Import JDBC Database &gt;&gt; Source Model” wizard, you will need to select a Connection Profile. If a connection profile does not exist for the database that contains the Product Schema, then select the <b class="button">New&#8230;&#8203;</b> button to create it.
The Connection Profile Wizard will come up. Scroll through the list to see the supported databases, then choose “PostgreSQL” for the connection profile type. Enter “Products” for the Name and click <b class="button">Next &gt;</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-setup-connection-profile.png" alt="3.3 setup connection profile">
</div>
</div>
<div class="paragraph">
<p>The next step of setting up the connection profile is selecting the driver to use. If the driver you need is not listed in the drop-down list of Drivers (and it should not be if this is your first time through these steps).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-add-jdbc-driver.png" alt="3.3 add jdbc driver">
</div>
</div>
<div class="paragraph">
<p>Then select the cross-haired icon “New Driver Definition” which is the first button to the right of Drivers drop-down list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-setup-connection-profile2.png" alt="3.3 setup connection profile2">
</div>
</div>
<div class="paragraph">
<p>In the “New Driver Definition” dialog, select the MySQL/PostgreSQL JDBC Driver. It will indicate that the driver JAR is not found. Click on the “JAR List” tab in the New Driver Definition wizard and select in our case the PostgreSQL JDBC driver: postgresql-8.1-404.jdbc2.jar and click <b class="button">Remove JAR/Zip</b> and then click the <b class="button">Add JAR/Zip</b> button to select the JDBC driver file to use to access the PostgreSQL jar that is part of your drive. Select the PostgreSQL/MySQL JDBC driver file from the directory where this file is saved after download. Click <b class="button">OK</b>. After clicking <b class="button">OK</b>, the warning that the JAR file could not be found will go away. Click <b class="button">OK</b> to return to the previous wizard.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-import-db-via-jdbc.png" alt="3.3 import db via jdbc">
</div>
</div>
<div class="paragraph">
<p>Now that the driver has been selected, you can fill in the database, url, username, and password for the connection profile.
Use the following values:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Database</th>
<th class="tableblock halign-left valign-top">URL</th>
<th class="tableblock halign-left valign-top">Username</th>
<th class="tableblock halign-left valign-top">Password</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">products</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:postgresql://localhost:5432/products</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">postgres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">postgres</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Go ahead and check the “Save password” checkbox. Your JDBC Connection Profile wizard should resemble that below. Click <b class="button">Test Connection</b>. A successful ping should return. If it does not, please raise your hand. Click <b class="button">Finish</b>. After clicking “Finish”, your Import Database via JDBC wizard should look like that below.
From this point, clicking <b class="button">Next &gt;</b> will take you to the dialog to select the metadata types that will be included when imported. The metadata that will be selected is indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-import-db-via-jdbc2.png" alt="3.3 import db via jdbc2">
</div>
</div>
<div class="paragraph">
<p>Once your database metadata selections have been made, click the <b class="button">Next</b> button. This will bring up the Select Database Objects dialogue. Be sure to click the arrow icon next to “public” in the Products database to expand the tree to show all objects available to import. Select the TABLE option, this will select the two tables we want to import.
Specifically, your dialogue for select database objects should look like that below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-import-db-via-jdbc3.png" alt="3.3 import db via jdbc3">
</div>
</div>
<div class="paragraph">
<p>If your dialogue looks like that above, click the <b class="button">Next &gt;</b> button. This will bring up the final screen of the JDBC Import Wizard as indicated below.
Notice that there is a requirement to select which folder this model should be created in. To the right of the “Into Folder” attribute, there is a button with <b class="button">&#8230;&#8203;</b> on it. Click this button and the following screen will be shown.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-import-db-via-jdbc4.png" alt="3.3 import db via jdbc4">
</div>
</div>
<div class="paragraph">
<p>Select the DataSources folder as indicated above. Once the folder has been selected, click the <b class="button">OK</b> button. This will bring us back to the final screen of the Import Database via JDBC wizard. Your screen should look like the one below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-import-db-via-jdbc5.png" alt="3.3 import db via jdbc5">
</div>
</div>
<div class="paragraph">
<p>To keep the table names simple, make sure the “Use Fully Qualified Names” checkbox is unchecked. After verifying it matches, click the <b class="button">Finish</b> button.
You will now see the Products.xmi source model was opened and its Package Diagram can be seen in the model view area. Click on productdata_pkey (the primary key of the productdata table at the bottom) and note that the Primary Key (productid) in productdata and the Foreign Key (productid) in the productssymbols table are highlighted. This is because Teiid Designer knows via the metadata that all of these elements are related.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-Products.png" alt="3.3 Products">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_preview_data_via_the_teiid_server">4.6. Preview Data via the Teiid Server</h3>
<div class="paragraph">
<p>With an active Teiid Server connection, all physical models that have been imported, along with any virtual models that are built on top of them, can be sampled (previewed) with the simple click of a button. To do this, let&#8217;s utilize the Modeling Actions palette on the right-hand side of the Designer. Select Model JDBC Source and to Preview data, double-click on the Preview Data action.
This will bring up the Preview Data dialogue as indicated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-Preview-data.png" alt="3.3 Preview data">
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">&#8230;&#8203;</b> button to open up a Table or Procedure Selection window. This allows us to drill-down into the tables that we wish to preview data for. For this lab, simply expand Financials, DataSources, and Products.xmi in order to select the productdata table as indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-productdata.png" alt="3.3 productdata">
</div>
</div>
<div class="paragraph">
<p>This will bring us back to the Preview Data window where it should look like the one below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-productdata2.png" alt="3.3 productdata2">
</div>
</div>
<div class="paragraph">
<p>Once you click <b class="button">OK</b>, a pop-up window will indicate that there are some temporary artifacts being deployed to the Teiid Server in order to preview the data. Finally, there will be two additional views that will open along the bottom of JBDS. Specifically, the SQL Results and Teiid Execution Plan tab views. A successful execution will yield sample results as indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.3-query-results.png" alt="3.3 query results">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_import_metadata_from_the_us_customers_and_eu_customers_databases">4.7. Import Metadata from the US_Customers and EU_Customers Databases</h3>
<div class="paragraph">
<p>We will now create source models that represent the US_Customers and EU_Customers schemas from our database. We will again import the metadata using the Import Database via JDBC Wizard to create the model. Use the steps from the previous section to import the two schemas. Name the Models US_Customers and EU_Customers and only import the table metadata for the tables account, accountholdings, and customer. The database names for these two sources are uscustomers and eucustomers respectively. The username/password combination is the same as for the product database (postgres / postgres). You will need to create a new Connection Profile for each source but you can reuse the PostgreSQL JDBC driver that was previously referenced. Additionally, feel free to preview data for these two additional data sources using the steps that were outlined above.
When you have completed the imports, the Package Diagram and Model Explorer for US_Customers, for example, will look similar to the following illustration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.4-US_Customers.png" alt="3.4 US Customers">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_import_metadata_from_a_flat_file">4.8. Import Metadata from a flat file</h3>
<div class="paragraph">
<p>So far we have been connecting to relational databases and their tables. You can connect to other types of data sources within the perspective. In this section we will connect to a flat file in a CSV (Comma Separated Values) format which contains market information as seen in the image below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-marketdata-csv.png" alt="3.5 marketdata csv">
</div>
</div>
<div class="paragraph">
<p>As with the steps above you will need to right-click on the DataSources folder and select import. This time you will select the File Source (Flat) &gt;&gt; Source and View Model to import a data source.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-flat-file-import.png" alt="3.5 flat file import">
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">Next &gt;</b> button. The File Import File Options dialog box will appear.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-import-from-flat-file-src.png" alt="3.5 import from flat file src">
</div>
</div>
<div class="paragraph">
<p>Select option Flat file on local file system and click the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-data-file-source-selection.png" alt="3.5 data file source selection">
</div>
</div>
<div class="paragraph">
<p>The next screen that is displayed is the dialog box to create a new connection profile. Click on the <b class="button">New&#8230;&#8203;</b> button.
The new connection profile dialog is displayed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-connection-profile.png" alt="3.5 connection profile">
</div>
</div>
<div class="paragraph">
<p>Type in MarketData for the name and click the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="paragraph">
<p>Use the <b class="button">Browse&#8230;&#8203;</b> button (see image below) to locate the folder where the market data CSV file resides. The location should be DVWorkshop/dv_docker/demo. Ensure Use first line as column name indicator is checked. You can click the Test Connection button, it will just ensure that the program can get to the directory specified.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-define-folder.png" alt="3.5 define folder">
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">Next &gt;</b> button. The next dialog is the Summary dialog box that displays what has been selected for this connection so far.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-summary.png" alt="3.5 summary">
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">Finish</b> button to continue. All of the CSV files are listed from the data source folder selected in the previous steps. We want to make sure that the check box is checked beside the marketdata.csv file, the file that you need to connect to. In the Source Model Definition, enter for the model name, MarketData in the Name: field (see image below).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-select-csv.png" alt="3.5 select csv">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Next &gt;</b> button to continue.</p>
</div>
<div class="paragraph">
<p>The next dialog box that opens allows you to select how the CSV file is formatted. In this case, the file is Character delimited (Delimited with a comma). See the image below for the settings that you need to select.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-flat-file-column-format.png" alt="3.5 flat file column format">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Next &gt;</b> button to continue. Next specify the flat file delimited columns parser settings for how the CSV file to be imported. You will change the Datatype of the price column to bigdecimal.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-flat-file-column-format2.png" alt="3.5 flat file column format2">
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">Next &gt;</b> button when complete.</p>
</div>
<div class="paragraph">
<p>The last step is to specify the View Model Definition (see image below). Enter the data from the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-view-model-definition.png" alt="3.5 view model definition">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Finish</b> button to import the model. Your JBDS screen should look similar to the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/3.5-view-model-final.png" alt="3.5 view model final">
</div>
</div>
<div class="paragraph">
<p>Save All. Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_virtual_base_layer">5. Create a Virtual Base Layer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Beyond the obvious advantages of integrating disparate data sources using an intuitive, easy-to-use technology such as JBoss Data Virtualization, another significant advantage of creating a data services abstraction layer is to provide a level of isolation from the physical sources themselves. By creating a layered set of data service models, from fine-grained to more granular data services, the developer can build a stable data integration layer than can easily adapt to changes in the source systems. This is especially advantageous when the consumers of the data are separate from/have no control of the providers of the data. A recommended best practice to begin building this "future-proof" abstraction layer is to create a Virtual Base Layer (VBL), a one-to-one mapping of each physical source that isolates any future changes that may arise in the data source(s) to a specific transformation in the model. These VBL components can then be used as building blocks for higher level services; all of the transformations built on top of them will not need to be changed should the need arise to accommodate a change in the source(s).</p>
</div>
<div class="sect2">
<h3 id="_create_a_virtual_base_layer_us_customers_vbl">5.1. Create a virtual base layer: US_Customers_VBL</h3>
<div class="paragraph">
<p>To create a VBL for each of the source metadata models that you have imported, right-click on the VirtualBaseLayer folder that you created earlier and select <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Teiid Metadata Model</span></span>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.1-new-metadata-model.png" alt="4.1 new metadata model">
</div>
</div>
<div class="paragraph">
<p>Enter US_Customers_VBL as the Model Name, Relational as the Model Class, and View Model as the Model Type. Select “Transform from an existing model” in the Select a model builder panel and click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.1-new-model-wizard.png" alt="4.1 new model wizard">
</div>
</div>
<div class="paragraph">
<p>The “Transform from an Existing Model” step of the New Model Wizard will appear.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.1-new-model-wizard2.png" alt="4.1 new model wizard2">
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">&#8230;&#8203;</b> to the right of Existing Model and open <span class="menuseq"><span class="menu">Financials</span>&#160;&#9656; <span class="submenu">DataSources</span>&#160;&#9656; <span class="menuitem">US_Customers.xmi</span></span>. Click <b class="button">OK</b>. You will be returned to the New Model Wizard. We are going to copy all model elements so simply click <b class="button">Finish</b> on the screen as indicated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.1-new-model-wizard3.png" alt="4.1 new model wizard3">
</div>
</div>
<div class="paragraph">
<p>The Package Diagram and Model Explorer for the US_Customers_VBL virtual model will now open in the workspace. Observe that the virtual models are rendered in yellow whereas physical models are rendered in blue. Save the changes to the project (do this periodically as you progress) and note that you can also do previews of the virtual model.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.1-package-diagram-window.png" alt="4.1 package diagram window">
</div>
</div>
<div class="paragraph">
<p>Double-click on the customer table in the US_Customer_VBL model. This will open the Transformation Editor.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.1-transformation-editor.png" alt="4.1 transformation editor">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The transformation has already been created for you, and as noted above it is a simple one-to-one mapping of the underlying physical source. By building up the data services in layers like this, it allows the designer to keep the transformational logic for each view fairly simple, and complex data transformations are achieved by uses several layers of such views. Now, in a traditional relational database, such a design would have a fairly heavy performance penalty at runtime to deal with all of these layers of views, which is why in a traditional database you&#8217;d see a use case like this defined as a single view defined with a very lengthy and complex SQL statement. The reason this is not an issue with JBoss Data Virtualization is because the Query Engine in the JBoss Data Virtualization Server compresses all of these layers at run time down to a single (potentially highly complex) query that is then optimized to run (in parallel if possible) against the backend data sources. Thus there is no penalty to using layered views with JBoss Data Virtualization.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The "transformation language" in the Transformation Editor is ANSI-standard SQL. We don&#8217;t make you learn a new language to define transformations, you just use normal SQL syntax, which is something that we find most data architects are already fairly comfortable with. We will be spending much more time with the Transformation Editor further on in the lab.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_eu_customers_vbl_and_products_vbl_models">5.2. Create the EU_Customers_VBL and Products_VBL Models</h3>
<div class="paragraph">
<p>Create VBLs for the other two physical models you have imported (Products_VBL and EU_Customers_VBL).
Be sure to create them within the VirtualBaseLayer folder. Right-clicking on the folder to get to the <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Teiid Metadata Model wizard</span></span>. Save your changes. When you are finished, your project should look like the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/4.2-new-metadata-model.png" alt="4.2 new metadata model">
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_an_enterprise_data_layer">6. Create an Enterprise Data Layer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next layer to build are the models in the EnterpriseDataLayer folder. What these models do is resolve the slight semantic differences between the EU_Customers and US_Customers database tables – for example, the US version includes a field for middle initial only in the customer table where the EU version of the customer table has a corresponding field for middle name. Now, one technique we use here to make resolving the semantic differences a little bit easier here is to convert all of the data types for these tables from the standard SQL datatypes to one of a set of custom datatypes we&#8217;ve defined using JBoss Data Virtualization&#8217;s data dictionary capabilities. This way we can ensure that we get all data for a particular field into the same datatype. It also gives us a guide to resolving any differences in field names between the two. Note that using a domain-specific (or enterprise-wide standard) data dictionary is only a recommendation. There is no hard requirement to define or use a data dictionary but instead do this semantic mediation without one (by manually comparing datatypes and field lengths between the two data sources). Our goal with JBoss Data Virtualization is to not impose any roadblocks for those users that want to get their use cases addressed as rapidly as possible – so we don&#8217;t force any requirement on users to define a data dictionary or a taxonomy or anything like that.</p>
</div>
<div class="sect2">
<h3 id="_import_the_data_dictionary_schema">6.1. Import the Data Dictionary Schema</h3>
<div class="paragraph">
<p>An XML schema containing the definitions of a number of datatypes applicable to the Financial domain used by this lab is located in DVWorkshop/dv_docker/demo. The name of the file is DataDictionary.xsd. We want to import the schema into the Schemas folder that was created in an earlier lab. Perform the following steps.
Right-click on the Schema folder in the Model Explorer and choose <span class="menuseq"><span class="menu">Import</span>&#160;&#9656; <span class="submenu">Teiid Designer</span>&#160;&#9656; <span class="menuitem">XML Schemas</span></span>. Then click the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.1-import-xsd.png" alt="5.1 import xsd">
</div>
</div>
<div class="paragraph">
<p>Choose to import the schema from the file system and click <b class="button">Next &gt;</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.1-import-xsd2.png" alt="5.1 import xsd2">
</div>
</div>
<div class="paragraph">
<p>Browse to the DVWorkshop/dv_docker/demo directory. Once the directory is opened in the “From Directory” field, you will be able to select the DataDictionary.xsd file. Then click <b class="button">Finish</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.1-import-xsd3.png" alt="5.1 import xsd3">
</div>
</div>
<div class="paragraph">
<p>You may get a warning that the Financials/Schemas already exists. Choose yes to overwrite.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examine_the_data_dictionary">6.2. Examine the Data Dictionary</h3>
<div class="paragraph">
<p>Double-click on the DataDictionary.xsd file you just imported to open the XML Schema viewer. This is a very basic viewer that allows you to see the design model, the source (note the tabs at the bottom), and choose any of the data types to view it&#8217;s properties (in the Properties tab to the bottom-left). The schema can be edited/created here, but most customers use XML-specific tooling to create these files.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.2-Data-Dictionary.png" alt="5.2 Data Dictionary">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_eu_customers_ddc_enterprise_data_layer">6.3. Create the EU_Customers_DDC Enterprise Data Layer</h3>
<div class="paragraph">
<p>Create a new virtual metadata model called EU_Customers_DDC (for Domain Data Dictionary) in the EnterpriseDataLayer folder. Right-click on the folder EnterpriseDataLayer and select <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Teiid Metadata Model</span></span> to bring up the New Model Wizard and make the following selections as indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-new-model.png" alt="5.3 new model">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Next &gt;</b> to go the next step of the New Model Wizard.</p>
</div>
<div class="paragraph">
<p>This time, use the EU_Customers_VBL.xmi as the model as the basis for the EU_Customers_DDC model and click <b class="button">OK</b> and then <b class="button">Finish</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-new-model2.png" alt="5.3 new model2">
</div>
</div>
<div class="paragraph">
<p>We are going to use the database schema of the eucustomers database as the standard upon which to base our enterprise model. Therefore we won&#8217;t be changing any of the table names or column names, but we will be modifying the transformation to incorporate our Data Dictionary. When we get to the transformations for the US_Customers_DDC and EU_Customers_DDC models we will see that more changes will be necessary to make them semantically align with our enterprise model.
Open the transformation Editor for the customer table of EU_Customers by double-clicking on it. Select CustomerID and note that there is a Datatype field in the Properties Panel on the lower left.</p>
</div>
<div class="paragraph">
<p>Click on the value field to the right of datatype in the Properties Panel in the lower left-hand side of JBDS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-DD-properties.png" alt="5.3 DD properties">
</div>
</div>
<div class="paragraph">
<p>When clicking in this field in the Properties Panel, the Select a Datatype Wizard is presented. The User-Defined Types were populated when we imported the DataDictionary.xsd schema. Browse through the datatypes, check and un-check the boxes to see which types are built-in and which are user-defined.</p>
</div>
<div class="paragraph">
<p>In the “Select a Datatype” window choose CustomerID user-defined type for the CustomerID column and click <b class="button">OK</b>. You can begin typing the name of the datatype in the top window to filter the selection types displayed.
Go through this exercise with every column in the Customer table choosing the appropriate datatype for each. Be sure to save your work. At the completion of the exercise, your Customer table should look like the one below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-select-datatype.png" alt="5.3 select datatype">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-select-datatype2.png" alt="5.3 select datatype2">
</div>
</div>
<div class="paragraph">
<p>Perform the same process for the other tables (Account, AccountHoldings) in the EU_Customer_DDC model. A way to "go back" to the parent model is to right-click on the teal background surrounding the View model and select "Show Parent Diagram". Alternatively, you can select the table you want to work with by double-clicking on it in the Model Explorer tree-view.
Note: however when you save your changes the following warnings appear in the Transformation Editor:
The SELECT transformation is valid, but NOT fully reconciled:
The transformation output types do not match the target attribute types.
This is because some of the enterprise datatypes we have chosen do not match the underlying format of the source data (AccountID, for example we are defining as a long, but it is a bigdecimal in the source).
To address these type mismatches we will open the Reconciler. This is done by clicking on the small icon just to the right of "Supports Update" in the Transformation Editor.</p>
</div>
<div class="paragraph">
<p>Clicking on the Reconciler for AccountHolding brings up the following view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-reconciler.png" alt="5.3 reconciler">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The highlighted fields indicate some problems. We can address all of these in one go by clicking on the <b class="button">Type Resolver&#8230;&#8203;</b> button. That will bring up the following wizard.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-reconciler2.png" alt="5.3 reconciler2">
</div>
</div>
<div class="paragraph">
<p>Select each mapping at the top and see that the proposed transformation at the bottom changes. This is under the SQL Symbol panel; we want to convert to the datatype that is assigned to the enterprise datatype. (The Virtual Target Attribute section of the wizard above lets you modify that datatype; we don&#8217;t want to do that here.)
Note that there are three different type mappings being handled here: bigdecimal to long, timestamp to date, and bigdecimal to float. We are not worried about precision in this case, so we can simply press the <b class="button">Convert all source SQL symbol datatypes</b>, followed by clicking <b class="button">OK</b>. This will return you to the Reconciler. Note that the SQL has been re-written in the transformation to handle all the type conversions. Click <b class="button">OK</b> on the Reconciler to finish the process and to return to the Transformation editor.</p>
</div>
<div class="paragraph">
<p>Now go back and perform the same steps with the account table.
If we were worried about precision, we could take any number of steps to refine/modify the transformation including coding it by hand in the Transformation Editor, using one of the large set of out-of-the-box functions provided with the product, or by creating our own User-Defined function.</p>
</div>
<div class="paragraph">
<p>When you are finished with the Account table, it will look like the following.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.3-reconciler3.png" alt="5.3 reconciler3">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_us_customers_ddc_enterprise_data_layer">6.4. Create the US_Customers_DDC Enterprise Data Layer</h3>
<div class="paragraph">
<p>Now that we have finished with building the first enterprise data service layer in our model, we can take a short-cut to creating the same type of model for the US_Customers model. Essentially we are going to use the EU_Customers_DDC model as a template for creating the US_Customers_DDC model, and then replace the sources of the transformations for each of the tables with the correct ones.
Here is how to do it:
Right-click on the EnterpriseDataLayer folder and select <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Teiid Metadata Model</span></span>. Fill in the wizard with the following fields (below) and click <b class="button">Next</b>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-newmodel.png" alt="5.4 newmodel">
</div>
</div>
<div class="paragraph">
<p>In the “New Model Wizard” window choose the EU_Customers_DDC.xmi model in the EnterpriseDataLayer folder and click <b class="button">OK</b> followed by <b class="button">Next &gt;</b> and <b class="button">Finish</b>. Your selection should be as indicated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-newmodel2.png" alt="5.4 newmodel2">
</div>
</div>
<div class="paragraph">
<p>Open the Transformation Editor on US_Customers_DDC.customer. See figure below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-newmodel3.png" alt="5.4 newmodel3">
</div>
</div>
<div class="paragraph">
<p>Note that the Source of the transformation is the EU_Customers_DDC.customer table. We want to replace that with the US_Customers_VBL.customer table. Right-click on the Source table and select <span class="menu">Remove Transformation Source(s)</span>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-removetransformsrc.png" alt="5.4 removetransformsrc">
</div>
</div>
<div class="paragraph">
<p>The following pop-up window will be presented.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-removetransformsrcconfirm.png" alt="5.4 removetransformsrcconfirm">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">OK</b>. The following illustration indicates what your view in Teiid Designer should now resemble.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-teiiddesigner.png" alt="5.4 teiiddesigner">
</div>
</div>
<div class="paragraph">
<p>Select the VirtualBaseLayer &#8594; US_Customers_VBL &#8594; customer table and drag &amp; drop the table in the Sources swim lane of the US_Customers_DDC window. This is highlighted in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-VBL.png" alt="5.4 VBL">
</div>
</div>
<div class="paragraph">
<p>There will be an error on our current model, US_Customers_DDC. At this point, we need to add a source model. Simply drag the highlighted customer table indicated in the previous illustration to the sources column on the right-hand side. This will add this table from our VirtualBaseLayer to our US_Customers_DDC model.</p>
</div>
<div class="paragraph">
<p>As is indicated on the model, the transformation is valid but is not fully reconciled. Click on the reconciler to bring up the wizard. As you can see from the reconciler, we have a bit of work to do.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-reconcile.png" alt="5.4 reconcile">
</div>
</div>
<div class="paragraph">
<p>There are two things that we need to do in order to fix this transformation.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Assign (Bind) variables that do not automatically match. By selecting the source on the left and the target on the right, we can then bind each of the following:</p>
<div class="ulist">
<ul>
<li>
<p>ssn to customerid</p>
</li>
<li>
<p>middleinitial to middlename</p>
</li>
<li>
<p>streetaddress1 to streetaddress</p>
</li>
<li>
<p>aptnumber to streetaddress2</p>
</li>
<li>
<p>state to stateprovince</p>
</li>
<li>
<p>zipcode to postalcode</p>
</li>
<li>
<p>phone to phonenumber (be sure to assign this on the left too and not map it to country!)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When we are finished, we have one more step.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a (simple) function to assign a value to Country as it does not exist in the source. To do this we will open up the Expression Builder by clicking on the "f(x)" button. This is right under the "&lt; Null" button in the middle area of the wizard. Since all that is needed is a simple (static) assignment, the Expression Builder comes up with the following screen.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/5.4-expression-builder.png" alt="5.4 expression builder">
</div>
</div>
<div class="paragraph">
<p>All we need to do is type "USA" into the Value field, click <b class="button">Apply</b>, then <b class="button">OK</b>. However, while you are in the Expression Builder, you may want to select the Function radio button to check out the many out-of-the-box functions and operations that ship with JBoss Data Virtualization. When you are finished, be sure to set it back to Constant and complete the instructions as outlined above.</p>
</div>
<div class="paragraph">
<p>When the Expression Builder exits back into the Reconciler, you will notice that the function ('USA' AS Country) has been properly assigned. Click <b class="button">OK</b> in the Reconciler and save your changes.
Now perform the same process with the other two tables (account and accountholdings). Delete the EU_Customers_DDC.account &amp; EU_Customers_DDC.accountholdings source and drag &amp; drop the appropriate US_Customers_VBL.account &amp; US_Customers_VBL.accountholdings source model and perform any necessary reconciliations. Again, you can go through the required steps to Preview data that was outlined in an earlier lab.
The Data Dictionary has also enterprise data types defined for Product data. Create a Products_DDC model in the EnterpriseDataLayer folder, source it from the Products_VBL model, and correct the datatypes in the Products_DDC model. Finally, reconcile any datatype conversion issues.</p>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_data_federation_layer">7. Create a Data Federation Layer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we have created our Virtual Base Layer (to isolate us from changes in the sources), defined an enterprise data dictionary to semantically reconcile the various terminologies in our disparate data sources, and created an Enterprise Data Layer that captures those mappings, we are ready to integrate some different data sources. And, since we have the ground work already, it could not be simpler.</p>
</div>
<div class="sect2">
<h3 id="_create_a_data_federation_layer_2">7.1. Create a Data Federation Layer</h3>
<div class="paragraph">
<p>Right-click on the Financials Project and go <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Folder</span></span> to create a new folder called “FederatedDataLayer”.
Create a new Teiid Metadata Model in this folder called “All_Customers". Create it by transforming it from the EU_Customers_DDC model. Your new model wizard should look like the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/6.1-newmodel.png" alt="6.1 newmodel">
</div>
</div>
<div class="paragraph">
<p>After clicking the <b class="button">Next</b> button, be sure to select the EU_Customers_DDC.xmi model as indicated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/6.1-newmodel2.png" alt="6.1 newmodel2">
</div>
</div>
<div class="paragraph">
<p>Now, open up the Transformation Editor for All_Customers.customer. In the Model Explorer on the left, open up the FederatedDataLayer &#8594; All_Customers model and highlight the customer table as indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/6.1-transformation-editor.png" alt="6.1 transformation editor">
</div>
</div>
<div class="paragraph">
<p>Select the customer table of the EU_Customers_DDC view model in the Transformation Editor.
NOTE: Several new icons have been activated in the middle tool bar. Click on the fourth one down on the middle tool bar. If you hover your mouse over the label it reads "Add Union Transformation Source(s)". It is possible that you may have to click this button twice for the action to occur. This will add the customer table from US_Customers_DDC to the All_Customers model. Additionally, the "T" icon will now have a small "U" to the lower-right indicating that there is a union that is responsible for this transformation. Now, all that is required is to save the model. That is it! You now have a union of two tables from two separate databases. In order to view the result, be sure the customer table is highlighted in the Model Explorer under the FederatedDataLayer. This is indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/6.1-transformation-editor2.png" alt="6.1 transformation editor2">
</div>
</div>
<div class="paragraph">
<p>With the All_Customers.customer table highlighted in the Model Explorer, the "Running Man" icon is now enabled. This icon is located on the toolbar directly below the Model Explorer tab. Click on this icon to preview the data of the combined EU customer and US customer database tables. If for some reason this does not work, select the Preview Data Action on the right-hand side of JBDS that was utilized in earlier labs to preview the data.
Now that the exercise for federating the customer table is complete, give it a try for the other two tables, account and accountholdings. Clearly, this is a simple example where we assume that the entries in the uscustomers database and the eucustomers database do not overlap. But, JBoss Data Virtualization is capable of very sophisticated modeling and transformations.</p>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_web_service">8. Create a Web Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, you will be utilizing the Teiid Designer and JBDS to create a Web Service. It should be noted that this lab is not a guide on Web Services or how or when to use them. Rather, this is an instructional approach for some of the advanced capabilities of Teiid Designer.
To begin, right-click on the All_Customers.xmi model in the FederatedDataLayer folder and select option <span class="menuseq"><span class="menu">Modeling</span>&#160;&#9656; <span class="menuitem">Create Web Service</span></span>. This is indicated in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-createws.png" alt="7 createws">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-createwsmenuoption.png" alt="7 createwsmenuoption">
</div>
</div>
<div class="paragraph">
<p>This will bring up the following wizard.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-createws2.png" alt="7 createws2">
</div>
</div>
<div class="paragraph">
<p>In order to keep things organized, be sure to select “Browse” and select the WebServices folder we created in an earlier lab. This will drop all web service artifacts within this folder. Then, click <b class="button">Finish</b>. If the generation was successful, the following result will occur.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-generate-ws.png" alt="7 generate ws">
</div>
</div>
<div class="paragraph">
<p>The generated Web Service will open after clicking <b class="button">OK</b>. Your Teiid Designer view should resemble that below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-Teiid-designer.png" alt="7 Teiid designer">
</div>
</div>
<div class="paragraph">
<p>If not selected, be sure to click on the “getcustomer” operation as indicated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-Teiid-designer2.png" alt="7 Teiid designer2">
</div>
</div>
<div class="paragraph">
<p>With the getcustomer operation highlighted, click the “Running man icon with a diamond T”. This icon is located across the top of the All_Customers_WS.xmi view and to the right of the Operation Editor. Click this icon to bring up the following window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/7-preview-data.png" alt="7 preview data">
</div>
</div>
<div class="paragraph">
<p>When initially opened, the customerid : CustomerID field will be blank. Enter in the value "CST01033". Then, click <b class="button">OK</b>.</p>
</div>
<div class="paragraph">
<p>Upon inspection of the Result1 tab reveals the XML output of the Web Service invocation as indicated below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;account_Output:customer_Output</span>                 <span class="attribute-name">xmlns:account_Output</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.metamatrix.com/account_Output</span><span class="delimiter">&quot;</span></span>         <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;customer_Output_Instance&gt;</span>
                <span class="tag">&lt;customerid&gt;</span>CST01033<span class="tag">&lt;/customerid&gt;</span>
                <span class="tag">&lt;firstname&gt;</span>Alexander<span class="tag">&lt;/firstname&gt;</span>
                <span class="tag">&lt;lastname&gt;</span>Franken<span class="tag">&lt;/lastname&gt;</span>
                <span class="tag">&lt;middlename&gt;</span>Horst<span class="tag">&lt;/middlename&gt;</span>
                <span class="tag">&lt;streetaddress&gt;</span>Berliner Platz 85<span class="tag">&lt;/streetaddress&gt;</span>
                <span class="tag">&lt;streetaddress2</span> <span class="attribute-name">xsi:nil</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;city&gt;</span>Munich<span class="tag">&lt;/city&gt;</span>
                <span class="tag">&lt;stateprovince</span> <span class="attribute-name">xsi:nil</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
                <span class="tag">&lt;postalcode&gt;</span>80806<span class="tag">&lt;/postalcode&gt;</span>
                <span class="tag">&lt;country&gt;</span>Germany<span class="tag">&lt;/country&gt;</span>
                <span class="tag">&lt;phonenumber&gt;</span>0890877435<span class="tag">&lt;/phonenumber&gt;</span>
        <span class="tag">&lt;/customer_Output_Instance&gt;</span>
<span class="tag">&lt;/account_Output:customer_Output&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_database_deployment">9. Virtual Database Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We have been doing all of our querying directly through the Preview interface of Teiid Designer, but in order to make our data services available to external clients, we will need to package them up into a Virtual DataBase (VDB), the deployable artifact that drives the run-time behavior of the server. It is exactly analogous to a WAR or an EAR file; once created it can simply be dropped into the deploy directory of a running server (with JBoss Data Virtualization installed) and the Teiid Server process will hot-deploy the data services modeled within it. The process is very simple.</p>
</div>
<div class="sect2">
<h3 id="_create_the_vdb_metadata_model">9.1. Create the VDB Metadata Model</h3>
<div class="paragraph">
<p>Right-click on the Financials project (top layer folder in the Model Explorer) and select <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Teiid VDB</span></span>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.1-new-teiid-vdb.png" alt="8.1 new teiid vdb">
</div>
</div>
<div class="paragraph">
<p>This will open the New VDB wizard. The New VDB wizard is part of the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.1-new-vdb-wizard.png" alt="8.1 new vdb wizard">
</div>
</div>
<div class="paragraph">
<p>Enter a VDB Name, “Financials”. Next, click the <b class="button">Add</b> button in order to select the model(s) to add to the VDB. Next, select the <b class="button">Add</b> button so we can select a model(s) to add to the VDB.Models wizard as indicated in the illustration below. This will bring up the Select Models window.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.1-select-models.png" alt="8.1 select models">
</div>
</div>
<div class="paragraph">
<p>For this lab, we will select the Financials → FederatedDataLayer → All_Customers.xmi model and click the <b class="button">OK</b> button. Your New VDB wizard should look like the illustration below. At this point, click the <b class="button">Finish</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.1-new-vdb.png" alt="8.1 new vdb">
</div>
</div>
<div class="paragraph">
<p>This will now open the VDB Viewer in Teiid Designer. Your view should look like the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.1-Teiid-Designer.png" alt="8.1 Teiid Designer">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All models, virtual and physical (as well as the DataDictionary schema we used) have been brought into the VDB. This is because the Query Engine will need all of the models and their associated metadata/transformations, in order to drive the run-time behavior. However, that does not mean that the data services developer is forced to expose all of these more granular data services if they should choose not to.
Indeed it is a best practice to at least completely hide the source data systems, to prevent users of the virtual layer from going directly to the sources. In this way JBoss Data Virtualization can add additional layers of security and authorization/authentication to protect sensitive data.
To illustrate this, uncheck the boxes in the second column (annotated with the magnifying glass icon) on the physical models. This will make them invisibile/unavailable to any client connecting to this VDB. The models are still there (and must be, for the rest of the federation to work), but they cannot be accessed other than through the higher-level data services that have been defined.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is what the view should look like with the physical source visibility turned off. Specifically, the EU_Customers.xmi and the US_Customers.xmi have their visibility turned off.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.1-Teiid-Designer2.png" alt="8.1 Teiid Designer2">
</div>
</div>
<div class="paragraph">
<p>Be sure to "Save All" to save all of the changes to the VDB.</p>
</div>
</div>
<div class="sect2">
<h3 id="_create_data_sources_on_the_jboss_data_virtualization_server">9.2. Create data sources on the JBoss Data Virtualization server</h3>
<div class="paragraph">
<p>There is one thing we need to do before we deploy the VDB to the server. We need to install the data sources into the JBoss Data Virtualization server&#8217;s deploy directory. This can be done in a number of ways. If we have the DataSource-ds.xml file we can simply drop it into the deploy directory. Note however that the JNDI name that the VDB expects must match. The JNDI name the VDB expects is in a column named JNDI Name. For this example, the JNDI names are EU_Customers and US_Customers and are derived automatically from the Source model name. This column is visible in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-Teiid-Designer.png" alt="8.2 Teiid Designer">
</div>
</div>
<div class="paragraph">
<p>We can also use Teiid Designer to pass the data source information that we captured in our model on to the Server. Not doing this automatically is an intentional security feature. To begin creating the required data sources, we need to ensure that the Teiid Panel is open. The panel is located in the Teiid tab along the bottom portion of JBDS. In fact, this is a "view" into the Teiid Instance that we created a connection to in an earlier lab. In the Teiid tab, there will be a top-level folder called JBoss Data Virtualization 6.1. Again, this name will be the name that you used in an earlier lab when we were connecting to this instance. Below the top-level folder, there are two additional folders, Data Sources and VDBs. The view of this tab can be seen in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-Teiid-instance.png" alt="8.2 Teiid instance">
</div>
</div>
<div class="paragraph">
<p>Once complete, you should note that these data sources are already available, along with some of the internal sources used by JBoss Data Virtualization. Your Data Sources view should look like that below.</p>
</div>
<div class="paragraph">
<p>At this point, we are ready to deploy the VDB to the server. This could not be easier. Simply right-click on Financials VDB model and select Modeling &#8594; Deploy.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-VDB-Modeling.png" alt="8.2 VDB Modeling">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-VDB-Deploy.png" alt="8.2 VDB Deploy">
</div>
</div>
<div class="paragraph">
<p>Before the VDB will be deployed the Create VDB Data Source dialogue window appears to create a data source automatically for the VDB or to skip it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-VDB-Create-DataSource.png" alt="8.2 VDB Create DataSource">
</div>
</div>
<div class="paragraph">
<p>After the VDB is deployed one can check the Data Sources in the Server tab of JBDS, see below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-DS-view.png" alt="8.2 DS view">
</div>
</div>
<div class="paragraph">
<p>Click <b class="button">Create Source</b> to create a data source for the Financials VDB.</p>
</div>
<div class="paragraph">
<p>Now the deployment of the VDB will begin in the running Teiid Server instance. Now, open up a browser and point it to <a href="http://localhost:8080" class="bare">http://localhost:8080</a>. This will open the console for administrative services for the JBoss Data Virtualization server. Click on "Administration Console". This is displayed in the illustration below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-Admin-console.png" alt="8.2 Admin console">
</div>
</div>
<div class="paragraph">
<p>Once the console is open, verify that the VDB has been deployed. Along the left-hand pane there is a Virtual Databases menu option. By clicking this option, we can see that the Financials VDB has been successfully deployed. By following the illustration below, click tab Models, you should be able to see the deployed data services.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.2-Admin-console2.png" alt="8.2 Admin console2">
</div>
</div>
<div class="paragraph">
<p>Upon closer inspection, you will notice that there is a "1" that has been appended to the VDB. This is simply the version number of the VDB. This enables you to deploy multiple versions of a VDB and have them accessible by your applications.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_diagrams">9.3. Dependency Diagrams</h3>
<div class="paragraph">
<p>There is a very useful feature for modeling in the Teiid Designer. Right-click on the All_Customers.customer table and select Modeling → Show Dependency Diagram.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.3-dependency-diagram.png" alt="8.3 dependency diagram">
</div>
</div>
<div class="paragraph">
<p>Then, choose the Outline view. This is the tab that is right next to the Model Explorer tab in the left-hand pane of JBDS. If the Outline View is not visible, simply enable it by going to <span class="menuseq"><span class="menu">Window</span>&#160;&#9656; <span class="submenu">Show View</span>&#160;&#9656; <span class="menuitem">Outline</span></span>. Finally, select the <b class="button">Show Diagram Overview</b> button.
This is the button located right under the Outline tab. You should see something like the following illustration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/8.3-outline-view.png" alt="8.3 outline view">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can scroll the "viewfinder" on the left in the Outline view to navigate the model on the right. You can also hover your mouse over the transformations (the diamond-shaped "T" nodes) on the right to examine the content of the transformations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This capability is helpful for navigating among large, complicated models, and also shows the provenance/lineage of any selected data service. As was noted at the beginning, there is tremendous power and reusablility that results from the ability to create data service layers without a performance penalty.</p>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_xml_and_service_sources">10. XML and Service Sources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab you will be using the JDBS tool to create a Web Service. This lab is not a guide on Web Services, on how or when to use or create Web Services, but an instructional approach for some of the capabilities of the JBDS tool to create a Web Service. In this lab you will create the CountryInfoService.xmi model and the CountryInfoServiceView.xmi model. These will be created from the WSDL:</p>
</div>
<div class="paragraph">
<p><a href="http://www.oorsprong.org/websamples.countryinfo/CountryInfoService.wso?WSDL" class="bare">http://www.oorsprong.org/websamples.countryinfo/CountryInfoService.wso?WSDL</a></p>
</div>
<div class="sect2">
<h3 id="_create_relational_model_from_wsdl">10.1. Create relational model from WSDL</h3>
<div class="paragraph">
<p>Using the WSDL importer results in the creation of query-able relational procedures that represent your desired request and response web service structure defined through your WSDL&#8217;s schema definition.
Create two new folders called WSDL and User-specified Procedures in your Model Explorer view. Right-click on the Financials project and select <span class="menuseq"><span class="menu">New</span>&#160;&#9656; <span class="menuitem">Folder</span></span>. Call the new folder WSDL.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.1-create-folder.png" alt="10.1 create folder">
</div>
</div>
<div class="paragraph">
<p>Do the same for folder User-specified Procedures.</p>
</div>
<div class="paragraph">
<p>Right-click on the WSDL folder and select Import&#8230;&#8203; from the right-hand menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-import-WSDL1.png" alt="10.2 import WSDL1">
</div>
</div>
<div class="paragraph">
<p>The Import dialog box is opened. Select WSDL File or URL &gt;&gt; Source and View Model (SOAP) located under the Teiid Designer folder from the import source list that is displayed in the Import dialog box. Click the <b class="button">Next &gt;</b> button to continue. The Create Relational Model from Web Service Dialog box opens.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-import-WSDL2.png" alt="10.2 import WSDL2">
</div>
</div>
<div class="paragraph">
<p>Since there are no Web Service Profiles configured one need to create a new one.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-import-WSDL3.png" alt="10.2 import WSDL3">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">New&#8230;&#8203;</b> button to create a new Connection Profile. The New Connection Profile dialog opens.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-new-connection-profile.png" alt="10.2 new connection profile">
</div>
</div>
<div class="paragraph">
<p>Type CountryInfo in the Name field and click the <b class="button">Next &gt;</b> button.
The New Connection Profile dialog box opens.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-new-connection-profile2.png" alt="10.2 new connection profile2">
</div>
</div>
<div class="paragraph">
<p>The WSDL that you will connect to is a URL. Click on the <b class="button">URL&#8230;&#8203;</b> button to enter a URL.
The WSDL URL dialog box opens.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-wsdl-url.png" alt="10.2 wsdl url">
</div>
</div>
<div class="paragraph">
<p>In the WSDL URL field enter in the following URL:</p>
</div>
<div class="paragraph">
<p><a href="http://www.oorsprong.org/websamples.countryinfo/CountryInfoService.wso?WSDL" class="bare">http://www.oorsprong.org/websamples.countryinfo/CountryInfoService.wso?WSDL</a></p>
</div>
<div class="paragraph">
<p>The WSDL has no security so leave the Security Type to default of None. Click the <b class="button">OK</b> button. When you click the <b class="button">OK</b> button the software will validate the URL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You will need an internet connection for this to validate correctly.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-new-connection-profile3.png" alt="10.2 new connection profile3">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Test Connection</b> button to test the URL. Click on the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-new-connection-profile4.png" alt="10.2 new connection profile4">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.2-new-ws-summary.png" alt="10.2 new ws summary">
</div>
</div>
<div class="paragraph">
<p>The Summary window will appear. Click <b class="button">Finish</b> to go the Source and WSDL Operations Definition.</p>
</div>
<div class="paragraph">
<p>The connection to the WSDL will return the WSDL Operations that are available. This first page involves defining your WSDL source connection profile. Select port (if multiple available), service mode (PAYLOAD vs MESSAGE) and check the operations you wish to use to generate your queryable relational procedures.
Click on the <b class="button">Deselect All</b> button to deselect all of the WSDL Operations. Click on the Operations: CountryName and the FullCountryInfo, to select.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.3-select-wsdl-operations.png" alt="10.3 select wsdl operations">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="paragraph">
<p>The Create Relational Model from Web Service dialog is displayed. This page allows you to define the source and target models where the generated procedures will be defined in. Notice that the Name fields for the Source and View model are populated. Based on initial workspace selection, the location for these models may be preset but changeable and the source and view model names will be generated based on the service name defined in your WSDL. Select the browse button <b class="button">&#8230;&#8203;</b> to select locations and existing models in your workspace.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.3-user-specified-prc.png" alt="10.3 user specified prc">
</div>
</div>
<div class="paragraph">
<p>Choose User-specified Procedures and click the <b class="button">Next &gt;</b> button.</p>
</div>
<div class="paragraph">
<p>In the next few steps add in the Element Info for both the CountryInfo and FullCountryInfo operations. Use the Operations combo selector at the top to switch between the operations.
In the Request tab, select and double-click the schema elements you wish to set as input parameters for your request. These will be added to the Element Info panel and the resulting generated SQL statement will be updated to reflect the new element. If the selected service mode for this procedure is set to MESSAGE, the HEADER tab will be enabled and allow you to define the SOAP header variables utilizing the same schema tree.
Select the Operation from the Operations pull-down (CountryInfo and FullCountryInfo). Add in the Schema Contents element by selecting the element in the left-hand side and clicking the Add button on the right-hand side. Repeat these actions for both the Request and Response tabs. See image below for further clarification.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.3-procedure-def.png" alt="10.3 procedure def">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This wizard generates both request and response procedures that are used in the query-able wrapped procedure. If you wish to generate Designer&#8217;s legacy create and extract procedures choose the Legacy Procedures option in the lower section and click <b class="button">Finish</b>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Finish</b> button.
A status screen is displayed while the models are being created.
The models will appear in the Model Explorer and will be open in the right-hand pane.
Click the <b class="button">Save All</b> button to save your models.</p>
</div>
<div class="paragraph">
<p>Double-click on the CountryName procedure to open the transformation view for the procedure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.3-country-name-view.png" alt="10.3 country name view">
</div>
</div>
<div class="paragraph">
<p>Click on the <b class="button">Preview Data</b> button to preview the data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.3-preview-data-iso.png" alt="10.3 preview data iso">
</div>
</div>
<div class="paragraph">
<p>Enter in a country code, such as AU for Australia, to retrieve the data. Click the <b class="button">OK</b> button.
View the SQL Status and Result1 tab to see the results returned from the procedure.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/10.3-SQL-results.png" alt="10.3 SQL results">
</div>
</div>
<div class="paragraph">
<p>Try returning other ISO country codes such as CA, BM, BR, etc. The ISO country codes can be found at the following URL:</p>
</div>
<div class="paragraph">
<p><a href="http://userpage.chemie.fu-berlin.de/diverse/doc/ISO_3166.html" class="bare">http://userpage.chemie.fu-berlin.de/diverse/doc/ISO_3166.html</a></p>
</div>
<div class="paragraph">
<p>Save and close the models.</p>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_odata">11. OData</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Open Data Protocol (OData) is a Web protocol for querying and updating data that provides a way to unlock your data and free it from silos that exist in applications today. OData does this by applying and building upon Web technologies such as HTTP, Atom Publishing Protocol (AtomPub) and JSON to provide access to information from a variety of applications, services, and stores. OData is used to expose and access information from a variety of sources including, but not limited to, relational databases, file systems, content management systems and traditional Web sites.
OData is consistent with the way the Web works, it makes a deep commitment to URIs for resource identification and commits to an HTTP-based, uniform interface for interacting with those resources (just like the Web). This allows OData to enable a new level of data integration and interoperability across a broad range of clients, servers, services, and tools.
For more information on OData see <a href="http://www.odata.org" class="bare">http://www.odata.org</a>.</p>
</div>
<div class="sect2">
<h3 id="_how_to_access_the_data">11.1. How to access the data</h3>
<div class="paragraph">
<p>When you have successfully deployed the Financials VDB into the JBoss Data Virtualization server, the OData protocol support is implicitly provided by the JBoss Data Virtualization server without any further configuration.
Now, open up a browser and point it to the following URL: <a href="http://localhost:8080/odata/Financials.1/All_Customers.customer" class="bare">http://localhost:8080/odata/Financials.1/All_Customers.customer</a>.
If you are requested to type in a username/password enter teiidUser/redhat1!. This is similar to making a JDBC/ODBC connection and issuing a SQL call as SELECT * FROM All_Customers.customer;
The returned results from OData query can be in Atom/AtomPub XML format or JSON format. By default AtomPub based XML result is returned as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/9.1-OData.png" alt="9.1 OData">
</div>
</div>
<div class="paragraph">
<p>To return the results in JSON format use the following URL as shown below:
<a href="http://localhost:8080/odata/Financials.1/All_Customers.customer?$format=json" class="bare">http://localhost:8080/odata/Financials.1/All_Customers.customer?$format=json</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/9.1-OData-JSON.png" alt="9.1 OData JSON">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_query_the_data">11.2. How to query the data</h3>
<div class="paragraph">
<p>To search for customer with customerid='CST01033' which is the SQL equivalent of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">SQL&gt; <span class="class">SELECT</span> * <span class="keyword">FROM</span> All_Customers.customer <span class="keyword">where</span> customerid=<span class="string"><span class="delimiter">'</span><span class="content">CST01033</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>use following URL and it should return the results shown below:
<a href="http://localhost:8080/odata/Financials.1/All_Customers.customer('CST01033'" class="bare">http://localhost:8080/odata/Financials.1/All_Customers.customer('CST01033'</a>)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/9.2-Query.png" alt="9.2 Query">
</div>
</div>
<div class="paragraph">
<p>Another way to query the data is to use the OData filter system query option using $filter in the URL. The $filter system query option allows clients to filter the set of resources that are addressed by a request URL. $filter specifies conditions that MUST be met by a resource for it to be returned in the set of matching resources.
To search customers from the USA which is the SQL equivalent of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">SQL&gt; <span class="class">SELECT</span> * <span class="keyword">FROM</span> All_Customers.customer <span class="keyword">where</span> country=<span class="string"><span class="delimiter">'</span><span class="content">USA</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>use following URL and this should return the results as shown below.
<a href="http://localhost:8080/odata/Financials.1/All_Customers.customer?$filter=country" class="bare">http://localhost:8080/odata/Financials.1/All_Customers.customer?$filter=country</a> eq 'USA'</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/9.2-Query2.png" alt="9.2 Query2">
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have now completed this lab.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 6.1<br>
Last updated 2015-02-13 11:48:48 CET
</div>
</div>
</body>
</html>